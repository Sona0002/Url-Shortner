{% extends 'base.html' %}

{% block title %}URL Shortener{% endblock %}

{% block content %}
<div class="card">
  <h1>URL Shortener</h1>
  <p class="muted">Paste a long URL and get a neat short link you can share.</p>

  <form method="post" novalidate>
    {% csrf_token %}
    <div class="form-row">
      {{ form.url }}
      <button type="submit">Shorten</button>
    </div>
    {{ form.url.errors }}
  </form>

  {% if shortened_url %}
  <div class="result">
    <div>Short link:</div>
    <div class="mono"><a href="{{ shortened_url }}" target="_blank" rel="noopener">{{ shortened_url }}</a></div>
  </div>
  {% endif %}
</div>

<div style="height: 16px"></div>

<div class="card">
  <h2 style="margin-top:0">Recent links</h2>
  <div class="grid">
    {% for u in recent %}
      <div class="item">
        <div class="mono"><strong>{{ u.short_code }}</strong> → <a href="/{{ u.short_code }}" target="_blank" rel="noopener">/{{ u.short_code }}</a></div>
        <div style="font-size:14px" class="muted">{{ u.original_url|truncatechars:80 }}</div>
        <div style="font-size:12px" class="muted">Clicks: {{ u.clicks }} • {{ u.created_at|date:'Y-m-d H:i' }}</div>
      </div>
    {% empty %}
      <div class="muted">No links yet. Create your first short link above!</div>
    {% endfor %}
  </div>
</div>
{% endblock %}